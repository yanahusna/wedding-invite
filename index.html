<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <title>Walimatul Urus â€“ Haziq & Aina</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-main: #f4f6fb;
      --bg-card: #ffffff;
      --blue-deep: #53617f;
      --grey-soft: #f1f2f6;
      --grey-text: #4b4f57;
      --accent: #d6bfa3;
      --shadow-soft: 0 18px 40px rgba(41, 53, 84, 0.15);
    }

    * { box-sizing: border-box; scroll-behavior: smooth; }

    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: #f5f6fb;
      color: var(--grey-text);
    }

    h1,h2,h3 {
      font-family: "Playfair Display", serif;
    }

    section {
      padding: 4rem 1.4rem;
      max-width: 900px;
      margin: 0 auto;
    }

    /* HERO */
    .hero {
      min-height: 100vh;
      display: flex; align-items: center; justify-content: center;
      text-align: center;
    }
    .hero-card {
      background: white;
      padding: 3rem 2rem;
      border-radius: 28px;
      box-shadow: var(--shadow-soft);
      border: 1px solid #cbd6ea;
    }

    .hero-subtitle {
      font-size: .8rem;
      letter-spacing: .2em;
      color: #6a748b;
    }

    .hero-names {
      font-size: 2.7rem;
      color: #37415b;
    }

    .hero-amp { color: var(--accent); }

    .hero-btn {
      margin-top: 1.5rem;
      padding: .8rem 2rem;
      border-radius: 999px;
      border: none;
      background: var(--blue-deep);
      color: white;
      cursor: pointer;
      font-size: .9rem;
      letter-spacing: .14em;
    }

    /* CARD */
    .card {
      background: var(--bg-card);
      padding: 2rem;
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      border: 1px solid #cbd6ea;
      margin-bottom: 2rem;
    }

    .section-title {
      text-align: center;
      margin-bottom: 1.4rem;
    }

    /* WISHES */
    .wishes-list {
      max-height: 260px;
      overflow-y: auto;
      margin-top: 1rem;
    }

    .wish-item {
      background: #f0f3fa;
      padding: .8rem 1rem;
      border-radius: 14px;
      margin-bottom: .7rem;
      border: 1px solid #d0d8e8;
    }

    .wish-item strong { color: #364159; }

    /* MUSIC BUTTON */
    .music-btn {
      position: fixed;
      bottom: 70px;
      right: 15px;
      background: var(--blue-deep);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 999px;
      cursor: pointer;
      z-index: 999;
    }

    .toast {
      position: fixed;
      top: 15px; left: 50%;
      transform: translateX(-50%);
      background: white;
      padding: .7rem 1.2rem;
      border-radius: 999px;
      color: #37415b;
      border: 1px solid #cbd6ea;
      box-shadow: var(--shadow-soft);
      opacity: 0;
      transition: .2s;
      z-index: 999;
    }

    .toast.show { opacity: 1; }
  </style>
</head>

<body>

  <!-- MUSIC -->
  <audio id="bgMusic" loop>
    <source src="weddingsong.mp3" type="audio/mpeg">
  </audio>
  <button id="musicBtn" class="music-btn">ðŸ”‡ Music Off</button>

  <div id="toast" class="toast"></div>

  <!-- HERO -->
  <section class="hero" id="home">
    <div class="hero-card">
      <div class="hero-subtitle">UNDANGAN MAJLIS WALIMATUL URUS</div>

      <h1 class="hero-names">Haziq <span class="hero-amp">&amp;</span> Aina</h1>

      <p>29 November 2025</p>
      <p>Dengan penuh kesyukuran kami menjemput anda ke majlis bahagia kami.</p>

      <button class="hero-btn" onclick="document.getElementById('details').scrollIntoView({behavior:'smooth'})">
        Buka Jemputan
      </button>
    </div>
  </section>

  <!-- DETAILS -->
  <section id="details">
    <div class="card">
      <div class="section-title">
        <h2>Butiran Majlis</h2>
      </div>
      <p><strong>Tarikh:</strong> 29 November 2025</p>
      <p><strong>Masa:</strong> 11.00 pagi â€“ 4.00 petang</p>
      <p><strong>Lokasi:</strong> Felda Palong 2, Gemas</p>
    </div>
  </section>

  <!-- WISH -->
  <section id="wish">
    <div class="card">
      <div class="section-title"><h2>Guest Book</h2></div>

      <form id="wishForm">
        <input type="text" id="wishName" placeholder="Nama" required>
        <textarea id="wishMessage" placeholder="Ucapan" required></textarea>
        <button type="submit">Hantar Ucapan</button>
      </form>

      <div id="wishesList" class="wishes-list"></div>
    </div>
  </section>

  <!-- RSVP -->
  <section id="rsvp">
    <div class="card">
      <div class="section-title"><h2>RSVP Kehadiran</h2></div>

      <form id="rsvpForm">
        <input type="text" id="rsvpName" placeholder="Nama" required>
        <input type="number" id="rsvpPax" value="1" min="1">
        <select id="rsvpStatus" required>
          <option value="">Pilih</option>
          <option value="Hadir">Hadir</option>
          <option value="Tidak Hadir">Tidak Hadir</option>
        </select>
        <input type="text" id="rsvpRemark" placeholder="Catatan">
        <button type="submit">Hantar RSVP</button>
      </form>
    </div>
  </section>

  <script>
    // GOOGLE SCRIPT URL  
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwRep80DpJmbi2jmwyu1RgEeenR2B-6mReb5tgPn36wRh5r2bo-1XDQrF4Jf3saUgTOLA/exec";

    // MUSIC
    const bgMusic = document.getElementById("bgMusic");
    const musicBtn = document.getElementById("musicBtn");
    bgMusic.volume = 0.7; bgMusic.muted = true;
    bgMusic.play().catch(()=>{});

    musicBtn.onclick = () => {
      bgMusic.muted = !bgMusic.muted;
      musicBtn.textContent = bgMusic.muted ? "ðŸ”‡ Music Off" : "ðŸ”Š Music On";
    };

    // TOAST
    function showToast(msg){
      const t=document.getElementById("toast");
      t.textContent=msg;
      t.classList.add("show");
      setTimeout(()=>t.classList.remove("show"),2000);
    }

async function loadWishes() {
  try {
    const res = await fetch(SCRIPT_URL);
    const data = await res.json();

    // Clear list
    wishesList.innerHTML = "";

    data.wishes.reverse().forEach(w => {
      const div = document.createElement("div");
      div.className = "wish-item";

      div.innerHTML = `
        <strong>${w.name}</strong>
        <span class="wish-msg">${w.message}</span>
        <span class="wish-time">${new Date(w.timestamp).toLocaleString("ms-MY")}</span>
      `;

      wishesList.appendChild(div);
    });

  } catch (err) {
    console.error("Load error:", err);
  }
}

// Load wishes automatically when page opens
loadWishes();


    // SUBMIT WISH
    document.getElementById("wishForm").addEventListener("submit", async(e)=>{
      e.preventDefault();
      const name = wishName.value.trim();
      const message = wishMessage.value.trim();

      await fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify({mode:"wish", name, message})
      });

      showToast("Ucapan dihantar ðŸ’™");
      wishForm.reset();
      loadWishes();
    });

    // SUBMIT RSVP
    document.getElementById("rsvpForm").addEventListener("submit", async(e)=>{
      e.preventDefault();

      await fetch(SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify({
          mode:"rsvp",
          name:rsvpName.value,
          pax:rsvpPax.value,
          status:rsvpStatus.value,
          remark:rsvpRemark.value
        })
      });

      showToast("RSVP dihantar ðŸ’™");
      rsvpForm.reset();
    });

    
  </script>
</body>
</html>
